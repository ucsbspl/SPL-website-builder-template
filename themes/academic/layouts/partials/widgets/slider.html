{{ $ := .root }}
{{ $page := .page }}
{{ $hash_id := .hash_id }}

<!-- Indicators -->
<ol class="carousel-indicators">
  {{ range $index, $item := $page.Params.item }}
  <li data-target="#{{$hash_id}}" data-slide-to="{{$index}}" {{if eq $index 0}}class="active"{{end}}></li>
  {{ end }}
</ol>

<!-- Carousel slides wrapper -->
<div class="carousel-inner">
  {{ range $index, $item := $page.Params.item }}
  <div class="wg-hero carousel-item{{if eq $index 0}} active{{end}}" style="{{with $page.Params.height}}{{printf "height: %s;" . | safeCSS}}{{end}}
    {{ if $item.overlay_color }}
    background-color: {{ $item.overlay_color | default "transparent" }};
    {{ end }}
    {{ if $item.overlay_img }}
    background-image:
    {{ if $item.overlay_filter }}linear-gradient(rgba(0, 0, 0, {{ $item.overlay_filter }}), rgba(0, 0, 0, {{ $item.overlay_filter }})), {{ end }}
    url('{{ printf "img/%s" $item.overlay_img | absURL }}');
    {{ end }}
    ;">
    <div class="container" style="text-align: {{$item.align | default "left"}};">
      <div class="row">
        <div class="col-12 col-lg-4 hero-preview">
          {{ if $item.preview_img }}
          <img src="{{ printf "img/%s" $item.preview_img | absURL }}">
          {{ end }}
        </div>
        <div class="col-12 col-lg-8">
          <h1 class="section-title" itemprop="headline">
            {{ with $item.title }}{{ . | markdownify | emojify }}{{ end }}
          </h1>

          {{ with $item.content }}
          <p class="hero-lead" style="{{if eq $item.align "center"}}margin: 0 auto 0 auto;{{else if eq $item.align "right"}}margin-left: auto; margin-right: 0{{end}}">
            {{ . | markdownify | emojify }}
          </p>
          {{ end }}
          
        {{ if $item.twitter }}
            <p><a class="twitter-timeline" data-width="70%" data-height="300" href="https://twitter.com/{{$item.twitter}}?ref_src=twsrc%5Etfw">Tweets by ucsbspl</a> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></p>
            </div>
        {{ end }}
        
        {{ if $item.vimeo_id}}
		  <div>
		  <iframe src="https://player.vimeo.com/video/{{$item.vimeo_id}}" style="position:absolute;top:25%;left:20%;width:60%;height:70%;" frameborder="0" allow="autoplay; fullscreen" allowfullscreen></iframe>
		  </div>
		  <script src="https://player.vimeo.com/api/player.js">
		  </script> <p><a href="https://vimeo.com/396759143">UC Santa Barbara from above</a> from <a href="https://vimeo.com/ucsantabarbara">UC Santa Barbara</a> on <a href="https://vimeo.com">Vimeo</a>.
		  </p><p></p>
		{{end}}
		  
		{{ if $item.youtube_id}}
		  <div class="auto-resizable-iframe">
			<div>
			<iframe src="https://www.youtube-nocookie.com/embed/{{$item.youtube_id}}?feature=player_detailpage" frameborder="0" allowFullScreen></iframe>
			</div>
			</div>
		{{end}}

          {{ if $item.cta_url }}
          {{ $pack := or .cta_icon_pack "fas" }}
          {{ $pack_prefix := $pack }}
          {{ if in (slice "fab" "fas" "far" "fal") $pack }}
            {{ $pack_prefix = "fa" }}
          {{ end }}
          <p>
            <a href="{{ $item.cta_url }}" class="btn btn-light btn-md">
              {{- with $item.cta_icon -}}<i class="{{ $pack }} {{ $pack_prefix }}-{{ . }}" style="padding-right: 10px;"></i>{{- end -}}
              {{- $item.cta_label | emojify | safeHTML -}}
            </a>
          </p>
          {{ end }}
        </div>
      </div>
    </div>
  </div>
  {{ end }}
</div>

<!-- Left and right controls -->
<a class="carousel-control-prev" href="#{{$hash_id}}" data-slide="prev">
  <span class="carousel-control-prev-icon"></span>
  <span class="sr-only">Previous</span>
</a>
<a class="carousel-control-next" href="#{{$hash_id}}" data-slide="next">
  <span class="carousel-control-next-icon"></span>
  <span class="sr-only">Next</span>
</a>